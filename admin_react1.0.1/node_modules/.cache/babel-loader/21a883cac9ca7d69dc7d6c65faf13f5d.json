{"ast":null,"code":"import{Navigate,Route,Routes}from'react-router-dom';import{useSelector}from\"react-redux\";import Login from'../pages/Login/index';import LayOut from'../LayOut/index';import routeItemNavList from'../units/useRouteItems';import combineData from'../units/useCombineData';import{jsx as _jsx}from\"react/jsx-runtime\";var a=false;var routes=[{path:'/',token:true,element:/*#__PURE__*/_jsx(LayOut,{})//   children:[\n//     {\n//         path:'/home',\n//         token:true,\n//         element:<Home></Home>,\n//     }\n//   ]\n},{path:'/login',element:/*#__PURE__*/_jsx(Login,{})},{path:'*',element:/*#__PURE__*/_jsx(\"div\",{children:\"404\"})}];//创建单个路由组件\nfunction ItemRoute(list,isToken){if(isToken){a=true;}console.log(isToken,99955556663);return list.map(function(item,index){return/*#__PURE__*/_jsx(Route,{path:item.path,element:item.token&&!a?/*#__PURE__*/_jsx(Navigate,{to:\"/login\"}):item.element,children:item.children?ItemRoute(item.children):''},index);});}//创建路由表\nfunction AddRouteList(){var isToken=useSelector(function(state){console.log('数据还在吗？',state.navListReducer);return state.navListReducer.token;});var navlist=useSelector(function(state){if(state.navListReducer.navList&&state.navListReducer.navList>0){return state.navListReducer.navList;}else{return state.navListReducer.navList.payload||false;}});if(navlist){routes[0].children=combineData(routeItemNavList(navlist));}console.log(routes,999998889);return/*#__PURE__*/_jsx(Routes,{children:ItemRoute(routes,isToken)});}export default AddRouteList;","map":{"version":3,"names":["Navigate","Route","Routes","useSelector","Login","LayOut","routeItemNavList","combineData","a","routes","path","token","element","ItemRoute","list","isToken","console","log","map","item","index","children","AddRouteList","state","navListReducer","navlist","navList","payload"],"sources":["D:/桌面/需要整理文件/react/admin_react1.0.1/src/routes/index.js"],"sourcesContent":["import { Navigate, Route,Routes} from 'react-router-dom'\r\nimport { useSelector } from \"react-redux\";\r\nimport Login from '../pages/Login/index'\r\nimport LayOut from '../LayOut/index'\r\nimport routeItemNavList from '../units/useRouteItems'\r\nimport combineData from '../units/useCombineData'\r\n\r\n\r\n\r\nlet a = false\r\n\r\nlet routes=[\r\n    {\r\n      path:'/',\r\n      token:true,\r\n      element:<LayOut></LayOut>,\r\n    //   children:[\r\n    //     {\r\n    //         path:'/home',\r\n    //         token:true,\r\n    //         element:<Home></Home>,\r\n    //     }\r\n    //   ]\r\n    },\r\n    {\r\n        path:'/login',\r\n        element:<Login></Login>,\r\n    },\r\n    {\r\n        path:'*',\r\n        element:<div>404</div>\r\n    }\r\n]\r\n\r\n//创建单个路由组件\r\nfunction ItemRoute(list,isToken){\r\n     if(isToken){\r\n        a = true\r\n     }\r\n    console.log(isToken,99955556663);\r\n    return (\r\n        list.map((item,index)=>{\r\n           return <Route path={item.path} element={item.token&&!a?<Navigate to='/login'></Navigate>:item.element} key={index}>\r\n              {item.children?ItemRoute(item.children):''}\r\n           </Route>\r\n        })\r\n    )\r\n}\r\n\r\n//创建路由表\r\n\r\nfunction AddRouteList(){\r\n    let isToken=useSelector(state=>{\r\n        \r\n        console.log('数据还在吗？',state.navListReducer);\r\n        \r\n        return  state.navListReducer.token\r\n    })\r\n    let navlist=useSelector(state=>{\r\n        if(state.navListReducer.navList && state.navListReducer.navList>0){\r\n            return state.navListReducer.navList\r\n        }else{\r\n            return state.navListReducer.navList.payload || false\r\n        }\r\n    })\r\n    if(navlist){\r\n        routes[0].children=combineData(routeItemNavList(navlist))\r\n    }\r\n    console.log(routes,999998889);\r\n    return <Routes>\r\n        {ItemRoute(routes,isToken)}\r\n    </Routes>\r\n}\r\n\r\nexport default AddRouteList"],"mappings":"AAAA,OAASA,QAAT,CAAmBC,KAAnB,CAAyBC,MAAzB,KAAsC,kBAAtC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,MAAP,KAAkB,sBAAlB,CACA,MAAOC,OAAP,KAAmB,iBAAnB,CACA,MAAOC,iBAAP,KAA6B,wBAA7B,CACA,MAAOC,YAAP,KAAwB,yBAAxB,C,2CAIA,GAAIC,EAAC,CAAG,KAAR,CAEA,GAAIC,OAAM,CAAC,CACP,CACEC,IAAI,CAAC,GADP,CAEEC,KAAK,CAAC,IAFR,CAGEC,OAAO,cAAC,KAAC,MAAD,IACV;AACA;AACA;AACA;AACA;AACA;AACA;AAVA,CADO,CAaP,CACIF,IAAI,CAAC,QADT,CAEIE,OAAO,cAAC,KAAC,KAAD,IAFZ,CAbO,CAiBP,CACIF,IAAI,CAAC,GADT,CAEIE,OAAO,cAAC,4BAFZ,CAjBO,CAAX,CAuBA;AACA,QAASC,UAAT,CAAmBC,IAAnB,CAAwBC,OAAxB,CAAgC,CAC3B,GAAGA,OAAH,CAAW,CACRP,CAAC,CAAG,IAAJ,CACF,CACFQ,OAAO,CAACC,GAAR,CAAYF,OAAZ,CAAoB,WAApB,EACA,MACID,KAAI,CAACI,GAAL,CAAS,SAACC,IAAD,CAAMC,KAAN,CAAc,CACpB,mBAAO,KAAC,KAAD,EAAO,IAAI,CAAED,IAAI,CAACT,IAAlB,CAAwB,OAAO,CAAES,IAAI,CAACR,KAAL,EAAY,CAACH,CAAb,cAAe,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAf,CAAiDW,IAAI,CAACP,OAAvF,UACHO,IAAI,CAACE,QAAL,CAAcR,SAAS,CAACM,IAAI,CAACE,QAAN,CAAvB,CAAuC,EADpC,EAAqGD,KAArG,CAAP,CAGF,CAJD,CADJ,CAOH,CAED;AAEA,QAASE,aAAT,EAAuB,CACnB,GAAIP,QAAO,CAACZ,WAAW,CAAC,SAAAoB,KAAK,CAAE,CAE3BP,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAqBM,KAAK,CAACC,cAA3B,EAEA,MAAQD,MAAK,CAACC,cAAN,CAAqBb,KAA7B,CACH,CALsB,CAAvB,CAMA,GAAIc,QAAO,CAACtB,WAAW,CAAC,SAAAoB,KAAK,CAAE,CAC3B,GAAGA,KAAK,CAACC,cAAN,CAAqBE,OAArB,EAAgCH,KAAK,CAACC,cAAN,CAAqBE,OAArB,CAA6B,CAAhE,CAAkE,CAC9D,MAAOH,MAAK,CAACC,cAAN,CAAqBE,OAA5B,CACH,CAFD,IAEK,CACD,MAAOH,MAAK,CAACC,cAAN,CAAqBE,OAArB,CAA6BC,OAA7B,EAAwC,KAA/C,CACH,CACJ,CANsB,CAAvB,CAOA,GAAGF,OAAH,CAAW,CACPhB,MAAM,CAAC,CAAD,CAAN,CAAUY,QAAV,CAAmBd,WAAW,CAACD,gBAAgB,CAACmB,OAAD,CAAjB,CAA9B,CACH,CACDT,OAAO,CAACC,GAAR,CAAYR,MAAZ,CAAmB,SAAnB,EACA,mBAAO,KAAC,MAAD,WACFI,SAAS,CAACJ,MAAD,CAAQM,OAAR,CADP,EAAP,CAGH,CAED,cAAeO,aAAf"},"metadata":{},"sourceType":"module"}