{"ast":null,"code":"import{LockOutlined,UserOutlined}from'@ant-design/icons';import{Button,Checkbox,Form,Input,message}from'antd';import{useDispatch}from'react-redux';import{getUserInfo}from'../../store/reducers/loginReducer';import{getUserToken}from'../../store/reducers/navListReducer';import{Loginpost}from'../../http/api/Login';import{useNavigate}from'react-router-dom';import'./index.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var dispatch=useDispatch();var navigate=useNavigate();var onFinish=function onFinish(values){//发送登录请求\nLoginpost('/login',values).then(function(res){if(res.code===200){//将用户名和密码存在全局状态中\ndispatch(getUserInfo(values));//将token存储在本地\nsessionStorage.setItem('token',res.token);dispatch(getUserToken(res.token));//提示用户登录成功\nmessage.success('登录成功');navigate('/',{replace:true});}else{message.error('网络错误');}});};return/*#__PURE__*/_jsx(\"div\",{id:\"login\",children:/*#__PURE__*/_jsxs(Form,{name:\"normal_login\",className:\"login-form\",initialValues:{remember:true},onFinish:onFinish,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"username\",rules:[{required:true,message:'用户名是必填项!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"\\u7528\\u6237\\u540D\\uFF1Aadmin or user\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:'密码是必填项!'}],children:/*#__PURE__*/_jsx(Input.Password,{prefix:/*#__PURE__*/_jsx(LockOutlined,{className:\"site-form-item-icon\"}),type:\"current-password\",placeholder:\"\\u5BC6\\u7801\\uFF1A123456 or 666666\",autoComplete:\"on\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsxs(Form.Item,{valuePropName:\"checked\",noStyle:true,children:[/*#__PURE__*/_jsx(Checkbox,{children:\"\\u81EA\\u52A8\\u767B\\u5F55\"}),/*#__PURE__*/_jsx(\"div\",{className:\"forgetpsw\",children:\"\\u5FD8\\u8BB0\\u5BC6\\u7801\\uFF1F\"})]})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",children:\"\\u767B\\u5F55\"})})]})});}export default Login;","map":{"version":3,"names":["LockOutlined","UserOutlined","Button","Checkbox","Form","Input","message","useDispatch","getUserInfo","getUserToken","Loginpost","useNavigate","Login","dispatch","navigate","onFinish","values","then","res","code","sessionStorage","setItem","token","success","replace","error","remember","required"],"sources":["D:/桌面/需要整理文件/react/admin_react1.0.1/src/pages/Login/index.js"],"sourcesContent":["import { LockOutlined, UserOutlined } from '@ant-design/icons';\r\nimport { Button, Checkbox, Form, Input,message} from 'antd';\r\nimport { useDispatch } from 'react-redux';\r\nimport {getUserInfo} from '../../store/reducers/loginReducer'\r\nimport {getUserToken} from '../../store/reducers/navListReducer'\r\nimport {Loginpost} from '../../http/api/Login'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './index.scss'\r\n\r\nfunction Login(){\r\n    let dispatch=useDispatch()\r\n    let navigate=useNavigate()\r\n    const onFinish = (values) => {\r\n    //发送登录请求\r\n        Loginpost('/login',values).then(res=>{\r\n            if(res.code===200){\r\n                //将用户名和密码存在全局状态中\r\n                dispatch(getUserInfo(values))\r\n                //将token存储在本地\r\n                sessionStorage.setItem('token',res.token)\r\n                dispatch(getUserToken(res.token))\r\n                //提示用户登录成功\r\n                message.success('登录成功');\r\n                navigate('/',{replace:true})\r\n            }else{\r\n                message.error('网络错误');\r\n            }\r\n        })\r\n      }\r\n\r\n    return (\r\n    <div id='login'>\r\n        <Form\r\n            name=\"normal_login\"\r\n            className=\"login-form\"\r\n            initialValues={{\r\n            remember: true,\r\n            }}\r\n            onFinish={onFinish}\r\n        >\r\n            <Form.Item\r\n                name=\"username\"\r\n                rules={[\r\n                {\r\n                    required: true,\r\n                    message: '用户名是必填项!',\r\n                },\r\n                ]}\r\n                >\r\n                <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"用户名：admin or user\" />\r\n            </Form.Item>\r\n            <Form.Item\r\n                name=\"password\"\r\n                rules={[\r\n                {\r\n                    required: true,\r\n                    message: '密码是必填项!',\r\n                },\r\n                ]}\r\n            >\r\n                <Input.Password \r\n                prefix={<LockOutlined className=\"site-form-item-icon\"/>}\r\n                type=\"current-password\"\r\n                placeholder=\"密码：123456 or 666666\"\r\n                autoComplete='on'\r\n                />\r\n            </Form.Item>\r\n            <Form.Item>\r\n                <Form.Item valuePropName=\"checked\" noStyle>\r\n                    <Checkbox>自动登录</Checkbox>\r\n                    <div className='forgetpsw'>忘记密码？</div>\r\n                </Form.Item>\r\n            </Form.Item>\r\n            <Form.Item>\r\n                <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                   登录\r\n                </Button>\r\n            </Form.Item>\r\n        </Form>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n"],"mappings":"AAAA,OAASA,YAAT,CAAuBC,YAAvB,KAA2C,mBAA3C,CACA,OAASC,MAAT,CAAiBC,QAAjB,CAA2BC,IAA3B,CAAiCC,KAAjC,CAAuCC,OAAvC,KAAqD,MAArD,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAAQC,WAAR,KAA0B,mCAA1B,CACA,OAAQC,YAAR,KAA2B,qCAA3B,CACA,OAAQC,SAAR,KAAwB,sBAAxB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAO,cAAP,C,wFAEA,QAASC,MAAT,EAAgB,CACZ,GAAIC,SAAQ,CAACN,WAAW,EAAxB,CACA,GAAIO,SAAQ,CAACH,WAAW,EAAxB,CACA,GAAMI,SAAQ,CAAG,QAAXA,SAAW,CAACC,MAAD,CAAY,CAC7B;AACIN,SAAS,CAAC,QAAD,CAAUM,MAAV,CAAT,CAA2BC,IAA3B,CAAgC,SAAAC,GAAG,CAAE,CACjC,GAAGA,GAAG,CAACC,IAAJ,GAAW,GAAd,CAAkB,CACd;AACAN,QAAQ,CAACL,WAAW,CAACQ,MAAD,CAAZ,CAAR,CACA;AACAI,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAA+BH,GAAG,CAACI,KAAnC,EACAT,QAAQ,CAACJ,YAAY,CAACS,GAAG,CAACI,KAAL,CAAb,CAAR,CACA;AACAhB,OAAO,CAACiB,OAAR,CAAgB,MAAhB,EACAT,QAAQ,CAAC,GAAD,CAAK,CAACU,OAAO,CAAC,IAAT,CAAL,CAAR,CACH,CATD,IASK,CACDlB,OAAO,CAACmB,KAAR,CAAc,MAAd,EACH,CACJ,CAbD,EAcD,CAhBH,CAkBA,mBACA,YAAK,EAAE,CAAC,OAAR,uBACI,MAAC,IAAD,EACI,IAAI,CAAC,cADT,CAEI,SAAS,CAAC,YAFd,CAGI,aAAa,CAAE,CACfC,QAAQ,CAAE,IADK,CAHnB,CAMI,QAAQ,CAAEX,QANd,wBAQI,KAAC,IAAD,CAAM,IAAN,EACI,IAAI,CAAC,UADT,CAEI,KAAK,CAAE,CACP,CACIY,QAAQ,CAAE,IADd,CAEIrB,OAAO,CAAE,UAFb,CADO,CAFX,uBASI,KAAC,KAAD,EAAO,MAAM,cAAE,KAAC,YAAD,EAAc,SAAS,CAAC,qBAAxB,EAAf,CAAiE,WAAW,CAAC,uCAA7E,EATJ,EARJ,cAmBI,KAAC,IAAD,CAAM,IAAN,EACI,IAAI,CAAC,UADT,CAEI,KAAK,CAAE,CACP,CACIqB,QAAQ,CAAE,IADd,CAEIrB,OAAO,CAAE,SAFb,CADO,CAFX,uBASI,KAAC,KAAD,CAAO,QAAP,EACA,MAAM,cAAE,KAAC,YAAD,EAAc,SAAS,CAAC,qBAAxB,EADR,CAEA,IAAI,CAAC,kBAFL,CAGA,WAAW,CAAC,oCAHZ,CAIA,YAAY,CAAC,IAJb,EATJ,EAnBJ,cAmCI,KAAC,IAAD,CAAM,IAAN,wBACI,MAAC,IAAD,CAAM,IAAN,EAAW,aAAa,CAAC,SAAzB,CAAmC,OAAO,KAA1C,wBACI,KAAC,QAAD,uCADJ,cAEI,YAAK,SAAS,CAAC,WAAf,4CAFJ,GADJ,EAnCJ,cAyCI,KAAC,IAAD,CAAM,IAAN,wBACI,KAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,CAAyC,SAAS,CAAC,mBAAnD,0BADJ,EAzCJ,GADJ,EADA,CAmDH,CAED,cAAeM,MAAf"},"metadata":{},"sourceType":"module"}