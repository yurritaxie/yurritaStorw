{"ast":null,"code":"import _toConsumableArray from\"D:/\\u684C\\u9762/\\u9700\\u8981\\u6574\\u7406\\u6587\\u4EF6/react/admin_react1.0.1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/\\u684C\\u9762/\\u9700\\u8981\\u6574\\u7406\\u6587\\u4EF6/react/admin_react1.0.1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NoticeBox(props){var noticeList=props.noticeList;var numsTotal=0;//得到未读的消息条数\nfunction getNum(){return noticeList.forEach(function(element){var arr=element.news.filter(function(item){return item.isReaded===false;});element.nums=arr.length;numsTotal+=element.nums;});}getNum();//获取每个通知列表\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),activeStyle=_useState2[0],setActiveStyle=_useState2[1];var _useState3=useState(noticeList[0].news),_useState4=_slicedToArray(_useState3,2),centerList=_useState4[0],setCenterList=_useState4[1];function changeNoticeTitle(index){setActiveStyle(index);setCenterList(function(centerList){return _toConsumableArray(noticeList[index].news);});}//已读样式变化\nfunction readed(Lists,index){props.numsTotal(numsTotal-1);var arr=_toConsumableArray(Lists);arr[index].isReaded=true;setCenterList(function(centerList){return _toConsumableArray(arr);});getNum();}//真实dom为\nfunction realList(){if(activeStyle===0){return noticeVitualDom(centerList);}else if(activeStyle===1){return messageVitualDom(centerList);}else if(activeStyle===2){return backlog(centerList);}}//底部\nfunction bottomList(){if(activeStyle===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u6E05\\u7A7A \\u901A\\u77E5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u67E5\\u770B\\u66F4\\u591A\"})]});}else if(activeStyle===1){return/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u6E05\\u7A7A \\u6D88\\u606F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u67E5\\u770B\\u66F4\\u591A\"})]});}else if(activeStyle===2){return/*#__PURE__*/_jsxs(\"div\",{className:\"bottom\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u6E05\\u7A7A \\u4EE3\\u529E\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u67E5\\u770B\\u66F4\\u591A\"})]});}}//通知内容列表，虚拟dom形成\nfunction noticeVitualDom(Lists){return Lists.map(function(item,index){if(item.isReaded){return/*#__PURE__*/_jsxs(\"div\",{className:\"box\",style:{opacity:0.5},onClick:function onClick(){return readed(Lists,index);},children:[/*#__PURE__*/_jsx(\"img\",{src:item.img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:item.content}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:item.time})]})]},index);}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"box\",onClick:function onClick(){return readed(Lists,index);},children:[/*#__PURE__*/_jsx(\"img\",{src:item.img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:item.content}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:item.time})]})]},index);}});}//消息内容列表，虚拟dom形成\nfunction messageVitualDom(Lists){return Lists.map(function(item,index){if(item.isReaded){return/*#__PURE__*/_jsxs(\"div\",{id:\"box1\",className:\"box\",style:{opacity:0.5},onClick:function onClick(){return readed(Lists,index);},children:[/*#__PURE__*/_jsx(\"img\",{src:item.img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:item.content}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:item.message}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:item.time})]})]},index);}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"box\",id:\"box1\",onClick:function onClick(){return readed(Lists,index);},children:[/*#__PURE__*/_jsx(\"img\",{src:item.img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:item.content}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:item.message}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:item.time})]})]},index);}});}//代办内容列表，虚拟dom形成\nfunction backlog(Lists){return Lists.map(function(item,index){if(item.isReaded){return/*#__PURE__*/_jsxs(\"div\",{className:\"backlog\",style:{opacity:0.5},onClick:function onClick(){return readed(Lists,index);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backlogTitle\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.taskname}),/*#__PURE__*/_jsx(\"span\",{className:'state'+index,children:item.state})]}),/*#__PURE__*/_jsx(\"div\",{className:\"backlogContent\",children:item.content})]},index);}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"backlog\",onClick:function onClick(){return readed(Lists,index);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"backlogTitle\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.taskname}),/*#__PURE__*/_jsx(\"span\",{className:'state'+index,children:item.state})]}),/*#__PURE__*/_jsx(\"div\",{className:\"backlogContent\",children:item.content})]},index);}});}return/*#__PURE__*/_jsxs(\"div\",{className:\"NoticeBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top\",children:noticeList.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:activeStyle===index?'active':'',onClick:function onClick(){return changeNoticeTitle(index);},children:[item.title,item.nums?/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uFF08\",item.nums,\"\\uFF09\"]}):'']},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:realList()}),bottomList()]});}export default NoticeBox;","map":{"version":3,"names":["useState","NoticeBox","props","noticeList","numsTotal","getNum","forEach","element","arr","news","filter","item","isReaded","nums","length","activeStyle","setActiveStyle","centerList","setCenterList","changeNoticeTitle","index","readed","Lists","realList","noticeVitualDom","messageVitualDom","backlog","bottomList","map","opacity","img","content","time","message","taskname","state","title"],"sources":["D:/桌面/需要整理文件/react/admin_react1.0.1/src/LayOut/Header/HeadNotice/NoticeBox/NoticeBox.js"],"sourcesContent":["\r\nimport {useState} from 'react'\r\nfunction NoticeBox(props){\r\n    let {noticeList}=props\r\n    let numsTotal=0\r\n    //得到未读的消息条数\r\n    function getNum(){\r\n      return noticeList.forEach(element => {\r\n            let arr=element.news.filter((item)=>{\r\n                return item.isReaded===false\r\n            })\r\n            element.nums=arr.length\r\n            numsTotal+=element.nums\r\n        })\r\n    }\r\n    getNum()\r\n    //获取每个通知列表\r\n    let [activeStyle,setActiveStyle]=useState(0)\r\n    let [centerList,setCenterList]=useState(noticeList[0].news)\r\n    function changeNoticeTitle(index){\r\n        setActiveStyle(index)\r\n        setCenterList((centerList)=>{\r\n            return [\r\n                ...noticeList[index].news\r\n            ]\r\n        })\r\n    }\r\n    //已读样式变化\r\n    function readed(Lists,index){\r\n        props.numsTotal(numsTotal-1)\r\n        let arr=[...Lists]\r\n        arr[index].isReaded=true\r\n        setCenterList((centerList)=>{\r\n            return [\r\n                ...arr\r\n            ]\r\n        })\r\n        getNum() \r\n    }\r\n\r\n    //真实dom为\r\n    function realList(){\r\n        if(activeStyle===0){\r\n            return noticeVitualDom(centerList)\r\n          }else if(activeStyle===1){\r\n           return messageVitualDom(centerList)\r\n          }else if(activeStyle===2){\r\n            return backlog(centerList)\r\n          }\r\n    }\r\n    //底部\r\n    function bottomList(){\r\n        if(activeStyle===0){\r\n            return <div className='bottom'>\r\n                <span>清空 通知</span>\r\n                <span>查看更多</span>\r\n            </div>\r\n          }else if(activeStyle===1){\r\n           return <div className='bottom'>\r\n                <span>清空 消息</span>\r\n                <span>查看更多</span>\r\n            </div>\r\n          }else if(activeStyle===2){\r\n            return <div className='bottom'>\r\n            <span>清空 代办</span>\r\n            <span>查看更多</span>\r\n           </div>\r\n          }\r\n    }\r\n    //通知内容列表，虚拟dom形成\r\n    function noticeVitualDom(Lists){\r\n      return Lists.map((item,index)=>{\r\n            if(item.isReaded){\r\n                return (<div className='box' key={index} style={{opacity:0.5}} onClick={()=>readed(Lists,index)}>\r\n                        <img src={item.img} alt=''></img>\r\n                        <div>\r\n                            <span>{item.content}</span>\r\n                            <span className='time'>{item.time}</span>\r\n                        </div>\r\n                    </div>\r\n                    )\r\n                    \r\n            }else{\r\n                return <div className='box' key={index} onClick={()=>readed(Lists,index)}>\r\n                        <img src={item.img} alt=''></img>\r\n                        <div>\r\n                            <span>{item.content}</span>\r\n                            <span className='time'>{item.time}</span>\r\n                        </div>\r\n                    </div>\r\n            }\r\n         }) \r\n    }\r\n    //消息内容列表，虚拟dom形成\r\n    function messageVitualDom(Lists){\r\n        return Lists.map((item,index)=>{\r\n            if(item.isReaded){\r\n                return <div id=\"box1\" className='box' key={index} style={{opacity:0.5}} onClick={()=>readed(Lists,index)}>\r\n                        <img src={item.img} alt=''></img>\r\n                        <div>\r\n                            <span>{item.content}</span>\r\n                            <span className='time'>{item.message}</span>   \r\n                            <span className='time'>{item.time}</span>\r\n                        </div>\r\n                    </div>\r\n            }else{\r\n                return <div className='box'id=\"box1\" key={index} onClick={()=>readed(Lists,index)}>\r\n                        <img src={item.img} alt=''></img>\r\n                        <div>\r\n                            <span>{item.content}</span>\r\n                            <span className='time'>{item.message}</span> \r\n                            <span className='time'>{item.time}</span>\r\n                        </div>\r\n                    </div>\r\n            }\r\n         }) \r\n    }\r\n    //代办内容列表，虚拟dom形成\r\n    function backlog(Lists){\r\n        return Lists.map((item,index)=>{\r\n            if(item.isReaded){\r\n                return <div className='backlog' key={index} style={{opacity:0.5}} onClick={()=>readed(Lists,index)}>\r\n                        <div className='backlogTitle'>\r\n                            <span>{item.taskname}</span>\r\n                            <span className={'state'+index}>{item.state}</span>\r\n                        </div>\r\n                        <div className='backlogContent'>{item.content}</div>\r\n                    </div>\r\n            }else{\r\n                return <div className='backlog' key={index} onClick={()=>readed(Lists,index)}>\r\n                        <div className='backlogTitle'>\r\n                            <span>{item.taskname}</span>\r\n                            <span className={'state'+index}>{item.state}</span>\r\n                        </div>\r\n                        <div className='backlogContent'>{item.content}</div>\r\n                    </div>\r\n            }\r\n        })\r\n    }\r\n    return(\r\n        <div className='NoticeBox'>\r\n            <div className='top'>\r\n                {\r\n                    noticeList.map((item,index)=>{\r\n                        return <div className={activeStyle===index?'active':''} key={index} onClick={()=>changeNoticeTitle(index)}>{item.title}\r\n                        {item.nums?<span>（{item.nums}）</span>:''}</div>\r\n                    })\r\n                }\r\n            </div>\r\n            <div className='center'>\r\n               {realList()}\r\n            </div>\r\n            {bottomList()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NoticeBox"],"mappings":"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"},"metadata":{},"sourceType":"module"}